<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        .container {
            max-width: 90vw;
            margin: 0 auto;
            padding: 20px;
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
        }
        .question {
            background-color: #fff;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }
        .option {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option:hover {
            background-color: #f5f5f5;
            transform: translateX(5px);
        }
        .selected {
            background-color: #e3f2fd;
        }
        .correct {
            background-color: #e8f5e9;
            border-color: #81c784;
        }
        .incorrect {
            background-color: #ffebee;
            border-color: #e57373;
        }
        .input-answer {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #1976d2;
        }
        #score {
            margin-top: 20px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
        }
        .feedback {
            margin-top: 10px;
            padding: 15px;
            border-radius: 4px;
            display: none;
            line-height: 1.6;
        }
        .code-block {
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre;
            overflow-x: auto;
            line-height: 1.5;
            font-size: 14px;
            border: 1px solid #ddd;
            position: relative;
        }
        .copy-button {
            position: absolute;
            top: 5px;
            right: 5px;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .explanation-text {
            margin-bottom: 10px;
        }
        .code-comment {
            color: #6a737d;
        }
        .code-output {
            color: #0a3069;
            border-left: 3px solid #2196f3;
            margin-left: 10px;
            padding-left: 10px;
        }

        .node foreignObject {
            overflow: visible;
            white-space: normal;
        }

        .node foreignObject p {
            /*margin: 0;*/
            padding: 0px;
            text-align: center;
            font-size: 26px;
            width: auto !important;
            min-width: 200px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.4.0/mermaid.min.js"></script>
    <link rel="stylesheet" href="/css/all.min.css">
    <link rel="stylesheet" href="../../css/all.min.css">
</head>
<body>
<div class="container">
    <h1>ðŸŒŸ JavaScript Data Structures Quiz</h1>
    <p>Test your knowledge of JavaScript data structures, methods, and modern features!</p>
    <div class="mermaid">
        graph LR
        DS["fa:fa-database JavaScript Data Structures"]

        %% Arrays Section
        Arrays["fa:fa-list Arrays"]
        DS -->|"Ordered collection"| Arrays
        Arrays -->|"Modification"| ArrMod["fa:fa-pencil-alt Modification"]
        Arrays -->|"Query"| ArrQuery["fa:fa-search Query"]
        Arrays -->|"Iteration"| ArrIter["fa:fa-sync Iteration"]
        Arrays -->|"Transform"| ArrTrans["fa:fa-random Transform"]
        Arrays -->|"Order"| ArrOrder["fa:fa-sort Order"]

        %% Array Modification - Linear Flow
        ArrMod -->|"Add to end"| Push["fa:fa-arrow-right push()"]
        Push -->|"Add to start"| Unshift["fa:fa-arrow-left unshift()"]
        Unshift -->|"Remove from end"| Pop["fa:fa-times-circle pop()"]
        Pop -->|"Remove from start"| Shift["fa:fa-backspace shift()"]
        Shift -->|"Add/Remove at index"| Splice["fa:fa-cut splice()"]
        Splice -->|"Fill values"| Fill["fa:fa-fill-drip fill()"]

        %% Array Query - Linear Flow
        ArrQuery -->|"Check existence"| Includes["fa:fa-check includes()"]
        Includes -->|"Find index"| IndexOf["fa:fa-search-location indexOf()"]
        IndexOf -->|"Get length"| Length["fa:fa-ruler length"]
        Length -->|"Find element"| Find["fa:fa-search-plus find()"]
        Find -->|"Check condition"| Some["fa:fa-question-circle some()"]
        Some -->|"Check all"| Every["fa:fa-check-double every()"]

        %% Array Iteration - Linear Flow
        ArrIter -->|"For each element"| ForEach["fa:fa-redo forEach()"]
        ForEach -->|"Generate entries"| Entries["fa:fa-key entries()"]
        Entries -->|"Get iterator"| Iterator["fa:fa-forward Symbol.iterator"]

        %% Array Transform - Linear Flow
        ArrTrans -->|"Create new array"| Map["fa:fa-map map()"]
        Map -->|"Filter elements"| Filter["fa:fa-filter filter()"]
        Filter -->|"Accumulate"| Reduce["fa:fa-compress-arrows-alt reduce()"]
        Reduce -->|"Get portion"| Slice["fa:fa-layer-group slice()"]
        Slice -->|"Join strings"| Join["fa:fa-link join()"]
        Join -->|"Flatten"| Flat["fa:fa-layer-group flat()"]

        %% Array Order - Linear Flow
        ArrOrder -->|"Reverse order"| Reverse["fa:fa-exchange-alt reverse()"]
        Reverse -->|"Sort elements"| Sort["fa:fa-sort-alpha-down sort()"]

        %% Objects Section
        Objects["fa:fa-cube Objects"]
        DS -->|"Key-value pairs"| Objects
        Objects -->|"Properties"| ObjProp["fa:fa-key Properties"]
        Objects -->|"Operations"| ObjOp["fa:fa-cogs Operations"]
        Objects -->|"Prototype"| ObjProto["fa:fa-dna Prototype"]
        Objects -->|"Descriptors"| ObjDesc["fa:fa-file-signature Descriptors"]

        %% Object Properties - Linear Flow
        ObjProp -->|"Get all keys"| Keys["fa:fa-key Object.keys()"]
        Keys -->|"Get all values"| Values["fa:fa-list-ul Object.values()"]
        Values -->|"Get entries"| ObjEntries["fa:fa-th Object.entries()"]
        ObjEntries -->|"Destructure"| Destruct["fa:fa-puzzle-piece { a, b = 3 }"]
        Destruct -->|"Check property"| HasProp["fa:fa-check-circle hasOwnProperty()"]

        %% Object Operations - Linear Flow
        ObjOp -->|"Spread"| Spread["fa:fa-copy {...obj}"]
        Spread -->|"Merge objects"| Assign["fa:fa-object-group Object.assign()"]
        Assign -->|"Freeze object"| Freeze["fa:fa-snowflake Object.freeze()"]
        Freeze -->|"Seal object"| Seal["fa:fa-lock Object.seal()"]
        Seal -->|"Create object"| Create["fa:fa-plus-circle Object.create()"]

        %% Object Prototype - Linear Flow
        ObjProto -->|"Get prototype"| GetProto["fa:fa-arrow-up getPrototypeOf()"]
        GetProto -->|"Set prototype"| SetProto["fa:fa-arrow-down setPrototypeOf()"]
        SetProto -->|"Check in chain"| IsProto["fa:fa-code-branch isPrototypeOf()"]

        %% Object Descriptors - Linear Flow
        ObjDesc -->|"Define property"| DefProp["fa:fa-edit defineProperty()"]
        DefProp -->|"Get descriptor"| GetDesc["fa:fa-info getOwnPropertyDescriptor()"]

        %% Map Section
        Maps["fa:fa-map Maps"]
        DS -->|"Unique keys"| Maps
        Maps -->|"Modifications"| MapMod["fa:fa-wrench Methods"]
        Maps -->|"Query"| MapQuery["fa:fa-search-plus Query"]
        Maps -->|"Iteration"| MapIter["fa:fa-sync Iteration"]

        %% Map Modifications - Linear Flow
        MapMod -->|"Add/Update"| Set["fa:fa-plus-circle set()"]
        Set -->|"Remove"| Delete["fa:fa-minus-circle delete()"]
        Delete -->|"Clear all"| Clear["fa:fa-eraser clear()"]

        %% Map Query - Linear Flow
        MapQuery -->|"Get value"| Get["fa:fa-hand-point-right get()"]
        Get -->|"Check key"| Has["fa:fa-check-square has()"]
        Has -->|"Count entries"| Size["fa:fa-calculator size"]

        %% Map Iteration - Linear Flow
        MapIter -->|"Get key-values"| MapEntries["fa:fa-th entries()"]
        MapEntries -->|"Get all keys"| MapKeys["fa:fa-key keys()"]
        MapKeys -->|"Get all values"| MapValues["fa:fa-list-ul values()"]

        %% Set Section
        Sets["fa:fa-layer-group Sets"]
        DS -->|"Unique values"| Sets
        Sets -->|"Modifications"| SetMod["fa:fa-wrench Methods"]
        Sets -->|"Query"| SetQuery["fa:fa-search-plus Query"]
        Sets -->|"Operations"| SetOp["fa:fa-random Operations"]

        %% Set Modifications - Linear Flow
        SetMod -->|"Add value"| Add["fa:fa-plus-circle add()"]
        Add -->|"Remove value"| DelSet["fa:fa-minus-circle delete()"]
        DelSet -->|"Clear all"| ClearSet["fa:fa-eraser clear()"]

        %% Set Query - Linear Flow
        SetQuery -->|"Check value"| HasSet["fa:fa-check-square has()"]
        HasSet -->|"Count values"| SetSize["fa:fa-hashtag size"]

        %% Set Operations - Linear Flow
        SetOp -->|"Union"| Union["fa:fa-object-group union()"]
        Union -->|"Intersection"| Intersect["fa:fa-object-ungroup intersection()"]
        Intersect -->|"Difference"| Diff["fa:fa-minus difference()"]

        %% Styles
        style DS fill:#f9f,stroke:#333,stroke-width:2px
        style Arrays fill:#bbf,stroke:#333,stroke-width:2px
        style Objects fill:#fbf,stroke:#333,stroke-width:2px
        style Maps fill:#bfb,stroke:#333,stroke-width:2px
        style Sets fill:#ffb,stroke:#333,stroke-width:2px
    </div>

    <div id="questions"></div>
    <div id="score"></div>
</div>

<script>

const quizData = {
    "title": "JavaScript Data Structures Quiz",
    "description": "Test your understanding of JavaScript data structures and methods!",
    "multipleChoice": [
        {
            "id": 1,
            "question": "What will be the output?\n\nconst arr = [1, 2, 3];\narr.push(4);\narr.unshift(0);\nconsole.log(arr.length);",
            "options": [
                { "id": "a", "text": "3" },
                { "id": "b", "text": "4" },
                { "id": "c", "text": "5" },
                { "id": "d", "text": "6" }
            ],
            "correctAnswer": "c",
            "explanation": "push() adds to the end and unshift() adds to the beginning. Two numbers were added, making length 5."
        },
        {
            "id": 2,
            "question": "What's the output?\n\nconst map = new Map();\nmap.set('a', 1);\nmap.set('b', 2);\nmap.set('a', 3);\nconsole.log(map.size);",
            "options": [
                { "id": "a", "text": "2" },
                { "id": "b", "text": "3" },
                { "id": "c", "text": "1" },
                { "id": "d", "text": "4" }
            ],
            "correctAnswer": "a",
            "explanation": "Map.set() updates the value if the key already exists. 'a' was updated, not added twice."
        },
        {
            "id": 3,
            "question": "What's the result?\n\nconst obj = { a: 1, b: 2 };\nconst { a, c = 3 } = obj;\nconsole.log(c);",
            "options": [
                { "id": "a", "text": "undefined" },
                { "id": "b", "text": "3" },
                { "id": "c", "text": "null" },
                { "id": "d", "text": "Error" }
            ],
            "correctAnswer": "b",
            "explanation": "In destructuring, c = 3 provides a default value when c doesn't exist in the object."
        },
        {
            "id": 4,
            "question": "What's unique about Set?\n\nconst set = new Set([1, 1, 2, 2, 3]);\nconsole.log(set.size);",
            "options": [
                { "id": "a", "text": "It maintains insertion order" },
                { "id": "b", "text": "It allows only unique values" },
                { "id": "c", "text": "It only accepts numbers" },
                { "id": "d", "text": "It's always sorted" }
            ],
            "correctAnswer": "b",
            "explanation": "Set automatically removes duplicates, storing only unique values. The size will be 3."
        },
        {
            "id": 5,
            "question": "What's the output?\n\nconst arr = [1, 2, 3, 4, 5];\nconst [first, ...rest] = arr;\nconsole.log(rest.length);",
            "options": [
                { "id": "a", "text": "5" },
                { "id": "b", "text": "4" },
                { "id": "c", "text": "1" },
                { "id": "d", "text": "0" }
            ],
            "correctAnswer": "b",
            "explanation": "The rest operator (...) creates an array with all remaining elements after destructuring first."
        }
    ],
    "fillInBlank": [
        {
            "id": 6,
            "question": "Use array method to remove last element:\nconst arr = [1, 2, 3];\narr._____()",
            "correctAnswer": "pop",
            "hint": "This method removes and returns the last element of an array"
        },
        {
            "id": 7,
            "question": "Convert object keys to array:\nconst obj = { a: 1, b: 2 };\nconst keys = Object._____(obj);",
            "correctAnswer": "keys",
            "hint": "Static method that returns an array of object's enumerable property names"
        },
        {
            "id": 8,
            "question": "Check if value exists in array:\nconst arr = [1, 2, 3];\nconst exists = arr._____(2);",
            "correctAnswer": "includes",
            "hint": "Method that returns true if an array includes a certain value"
        },
        {
            "id": 9,
            "question": "Create a new object by spreading:\nconst obj1 = { a: 1 };\nconst obj2 = { _____ obj1, b: 2 };",
            "correctAnswer": "...",
            "hint": "Spread operator to copy properties from one object to another"
        },
        {
            "id": 10,
            "question": "Convert Map to array of key-value pairs:\nconst map = new Map();\nconst arr = Array.from(map._____());",
            "correctAnswer": "entries",
            "hint": "Method that returns an iterator of [key, value] pairs"
        }
    ]
};

function init() {
    const questionsContainer = document.getElementById('questions');

    // Multiple Choice Questions
    quizData.multipleChoice.forEach(q => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question';
        questionDiv.innerHTML = `
            <h3>Question ${q.id}:</h3>
            <div class="code-block">${q.question}</div>
            ${q.options.map(opt => `
                <div class="option" data-question="${q.id}" data-option="${opt.id}">
                    ${opt.id.toUpperCase()}. ${opt.text}
                </div>
            `).join('')}
            <div id="explanation-${q.id}" class="feedback"></div>
        `;
        questionsContainer.appendChild(questionDiv);
    });

    // Fill in the Blank Questions
    quizData.fillInBlank.forEach(q => {
        const questionDiv = document.createElement('div');
        questionDiv.className = 'question';
        questionDiv.innerHTML = `
            <h3>Question ${q.id}:</h3>
            <div class="code-block">${q.question}</div>
            <div class="fill-blank">
                <input type="text" id="q${q.id}" placeholder="Type your answer">
                <p class="hint"><em>Hint: ${q.hint}</em></p>
                <button class="check-answer" onclick="checkFillBlank(${q.id})">Check Answer</button>
                <div id="feedback-${q.id}" class="feedback"></div>
            </div>
        `;
        questionsContainer.appendChild(questionDiv);
    });

    updateScore();

    // Multiple Choice Event Listeners
    document.querySelectorAll('.option').forEach(option => {
        option.addEventListener('click', function() {
            const questionId = this.dataset.question;
            const selectedOption = this.dataset.option;
            const question = quizData.multipleChoice.find(q => q.id === parseInt(questionId));
            const explanation = document.getElementById(`explanation-${questionId}`);

            // Reset all options in this question
            document.querySelectorAll(`[data-question="${questionId}"]`)
                .forEach(opt => opt.classList.remove('correct', 'incorrect'));

            if (selectedOption === question.correctAnswer) {
                this.classList.add('correct');
                explanation.style.display = 'block';
                explanation.className = 'feedback correct';
                explanation.textContent = "Correct! " + question.explanation;
                if (!this.dataset.scored) {
                    this.dataset.scored = 'true';
                    updateScore();
                }
            } else {
                this.classList.add('incorrect');
                const correctOption = document.querySelector(
                    `[data-question="${questionId}"][data-option="${question.correctAnswer}"]`
                );
                correctOption.classList.add('correct');
                explanation.style.display = 'block';
                explanation.className = 'feedback incorrect';
                explanation.textContent = "Incorrect. " + question.explanation;
            }
        });
    });
}

function checkFillBlank(questionId) {
    const input = document.getElementById(`q${questionId}`);
    const feedback = document.getElementById(`feedback-${questionId}`);
    const question = quizData.fillInBlank.find(q => q.id === questionId);

    if (input.value.trim() === question.correctAnswer) {
        input.classList.remove('incorrect');
        input.classList.add('correct');
        feedback.style.display = 'block';
        feedback.className = 'feedback correct';
        feedback.textContent = "Correct! ðŸŽ‰";
        if (!input.dataset.scored) {
            input.dataset.scored = 'true';
            updateScore();
        }
    } else {
        input.classList.remove('correct');
        input.classList.add('incorrect');
        feedback.style.display = 'block';
        feedback.className = 'feedback incorrect';
        feedback.textContent = "Try again! Remember: " + question.hint;
    }
}

function updateScore() {
    const totalQuestions = quizData.multipleChoice.length + quizData.fillInBlank.length;
    const correctMultipleChoice = document.querySelectorAll('.option[data-scored="true"]').length;
    const correctFillBlank = document.querySelectorAll('input[data-scored="true"]').length;
    const score = correctMultipleChoice + correctFillBlank;

    document.getElementById('score').textContent = `Score: ${score}/${totalQuestions}`;
}

init();
</script>
</body>
</html>
